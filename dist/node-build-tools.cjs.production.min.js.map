{"version":3,"file":"node-build-tools.cjs.production.min.js","sources":["../src/shell.ts","../src/zip.ts"],"sourcesContent":["import ps from 'child_process';\n\n/**\n * Execute shell commands.\n *\n * @remarks\n * `stdio` are inherited.\n *\n * @param cmd The command or commands to execute.\n * @param cwd Current working directory, defaults to `process.cwd()`;\n */\nexport const shell = (cmd: string | string[], cwd?: string) => {\n  const options: ps.ExecSyncOptions = {\n    cwd: cwd || process.cwd(),\n    stdio: 'inherit',\n    windowsHide: true,\n  };\n\n  const commands = Array.isArray(cmd) ? cmd : [cmd];\n  for (const command of commands) {\n    console.log(`\\n${command}`);\n    ps.execSync(command, options);\n  }\n};\n","import Zip from 'adm-zip';\nimport fs from 'fs';\n\n/**\n * Make a zip archive from a file/folder on disk.\n *\n * @param fileOrFolder The path to the local file/folder.\n * @param saveAs The path for saving the zip archive file.\n */\nexport const zip = (fileOrFolder: string, saveAs: string) => {\n  const isDirectory = fs.lstatSync(fileOrFolder).isDirectory();\n  const zip = new Zip();\n  if (isDirectory) {\n    zip.addLocalFolder(fileOrFolder);\n  } else {\n    zip.addLocalFile(fileOrFolder);\n  }\n\n  zip.writeZip(saveAs);\n};\n\n/**\n * Extracts the entire archive to the given location\n * @param zipFile The zip archive to extract.\n * @param extractTo Path to the save folder.\n */\nexport const unzip = (zipFile: string, extractTo: string) => {\n  const zip = new Zip(zipFile);\n  zip.extractAllTo(extractTo);\n};\n"],"names":["cmd","cwd","options","process","stdio","windowsHide","Array","isArray","command","console","log","ps","execSync","zipFile","extractTo","Zip","extractAllTo","fileOrFolder","saveAs","isDirectory","fs","lstatSync","zip","addLocalFolder","addLocalFile","writeZip"],"mappings":"qXAWqB,SAACA,EAAwBC,aACtCC,EAA8B,CAClCD,IAAKA,GAAOE,QAAQF,MACpBG,MAAO,UACPC,aAAa,wrBAGEC,MAAMC,QAAQP,GAAOA,EAAM,CAACA,mBACb,KAArBQ,UACTC,QAAQC,SAASF,GACjBG,EAAGC,SAASJ,EAASN,mBCKJ,SAACW,EAAiBC,GACzB,IAAIC,EAAIF,GAChBG,aAAaF,gBAnBA,SAACG,EAAsBC,OAClCC,EAAcC,EAAGC,UAAUJ,GAAcE,cACzCG,EAAM,IAAIP,EACZI,EACFG,EAAIC,eAAeN,GAEnBK,EAAIE,aAAaP,GAGnBK,EAAIG,SAASP"}