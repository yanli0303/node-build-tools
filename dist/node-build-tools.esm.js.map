{"version":3,"file":"node-build-tools.esm.js","sources":["../src/shell.ts","../src/zip.ts"],"sourcesContent":["import ps from 'child_process';\n\n/**\n * Execute shell commands.\n *\n * @remarks\n * `stdio` are inherited.\n *\n * @param cmd The command or commands to execute.\n * @param cwd Current working directory, defaults to `process.cwd()`;\n */\nexport const shell = (cmd: string | string[], cwd?: string) => {\n  const options: ps.ExecSyncOptions = {\n    cwd: cwd || process.cwd(),\n    stdio: 'inherit',\n    windowsHide: true,\n  };\n\n  const commands = Array.isArray(cmd) ? cmd : [cmd];\n  for (const command of commands) {\n    console.log(`\\n${command}`);\n    ps.execSync(command, options);\n  }\n};\n","import Zip from 'adm-zip';\nimport fs from 'fs';\n\n/**\n * Make a zip archive from a file/folder on disk.\n *\n * @param fileOrFolder The path to the local file/folder.\n * @param saveAs The path for saving the zip archive file.\n */\nexport const zip = (fileOrFolder: string, saveAs: string) => {\n  const isDirectory = fs.lstatSync(fileOrFolder).isDirectory();\n  const zip = new Zip();\n  if (isDirectory) {\n    zip.addLocalFolder(fileOrFolder);\n  } else {\n    zip.addLocalFile(fileOrFolder);\n  }\n\n  zip.writeZip(saveAs);\n};\n\n/**\n * Extracts the entire archive to the given location\n * @param zipFile The zip archive to extract.\n * @param extractTo Path to the save folder.\n */\nexport const unzip = (zipFile: string, extractTo: string) => {\n  const zip = new Zip(zipFile);\n  zip.extractAllTo(extractTo);\n};\n"],"names":["shell","cmd","cwd","options","process","stdio","windowsHide","commands","Array","isArray","command","console","log","ps","execSync","zip","fileOrFolder","saveAs","isDirectory","fs","lstatSync","Zip","addLocalFolder","addLocalFile","writeZip","unzip","zipFile","extractTo","extractAllTo"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;;;;;;;;;IASaA,KAAK,GAAG,SAARA,KAAQ,CAACC,GAAD,EAAyBC,GAAzB;AACnB,MAAMC,OAAO,GAAuB;AAClCD,IAAAA,GAAG,EAAEA,GAAG,IAAIE,OAAO,CAACF,GAAR,EADsB;AAElCG,IAAAA,KAAK,EAAE,SAF2B;AAGlCC,IAAAA,WAAW,EAAE;AAHqB,GAApC;AAMA,MAAMC,QAAQ,GAAGC,KAAK,CAACC,OAAN,CAAcR,GAAd,IAAqBA,GAArB,GAA2B,CAACA,GAAD,CAA5C;;AACA,uDAAsBM,QAAtB,wCAAgC;AAAA,QAArBG,OAAqB;AAC9BC,IAAAA,OAAO,CAACC,GAAR,QAAiBF,OAAjB;AACAG,IAAAA,EAAE,CAACC,QAAH,CAAYJ,OAAZ,EAAqBP,OAArB;AACD;AACF;;ACpBD;;;;;;;AAMA,IAAaY,GAAG,GAAG,aAACC,YAAD,EAAuBC,MAAvB;AACjB,MAAMC,WAAW,GAAGC,EAAE,CAACC,SAAH,CAAaJ,YAAb,EAA2BE,WAA3B,EAApB;AACA,MAAMH,GAAG,GAAG,IAAIM,GAAJ,EAAZ;;AACA,MAAIH,WAAJ,EAAiB;AACfH,IAAAA,GAAG,CAACO,cAAJ,CAAmBN,YAAnB;AACD,GAFD,MAEO;AACLD,IAAAA,GAAG,CAACQ,YAAJ,CAAiBP,YAAjB;AACD;;AAEDD,EAAAA,GAAG,CAACS,QAAJ,CAAaP,MAAb;AACD,CAVM;AAYP;;;;;;AAKA,IAAaQ,KAAK,GAAG,SAARA,KAAQ,CAACC,OAAD,EAAkBC,SAAlB;AACnB,MAAMZ,GAAG,GAAG,IAAIM,GAAJ,CAAQK,OAAR,CAAZ;AACAX,EAAAA,GAAG,CAACa,YAAJ,CAAiBD,SAAjB;AACD,CAHM;;;;"}